(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return p}));n(0);var a=n(18),r=n(4),o=function(e){var t=e.userId,n=e.path,o=e.render;return t?Object(r.jsx)(a.b,{path:n,render:o}):Object(r.jsx)(a.a,{exact:!0,to:"/login"})},c=function(){return Object(r.jsx)("div",{children:"Loading..."})},i=n(206),s=n(209),l=n(211),u=n(212),d=Object(i.a)((function(e){return{bg:{backgroundColor:"#ef5350"},toolbar:{display:"flex",justifyContent:"flex-end",padding:e.spacing(0,10)}}})),p=function(e){var t=e.handleLogout,n=d(),a=n.bg,o=n.toolbar;return Object(r.jsx)(s.a,{position:"static",color:"secondary",className:a,children:Object(r.jsx)(l.a,{className:o,children:Object(r.jsx)(u.a,{onClick:function(){return t()},style:{color:"white"},color:"primary",variant:"outlined",children:"Logout"})})})}},105:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(0);var a,r=n(206),o=n.p+"static/media/bg-pattern-tile.7d438991.svg",c=n(4),i=Object(r.a)((function(e){return{background:{backgroundImage:"url(".concat(o,")"),backgroundPositionX:"200px",backgroundSize:"1000px"},container:{width:"100vw",height:"100vh",position:"relative",backgroundColor:"rgba(0, 0, 0, 0.08)"}}}));!function(e){e.Auth="auth",e.Home="home"}(a||(a={}));t.b=function(e){var t=e.pageType,n=e.children,r=i(),o=r.background,s=r.container;return t===a.Auth?Object(c.jsx)("div",{className:o,children:Object(c.jsx)("section",{className:s,children:n})}):Object(c.jsx)("div",{className:o,children:Object(c.jsx)("div",{className:s,children:n})})}},110:function(e,t,n){"use strict";n.r(t),n.d(t,"AuthPageType",(function(){return H}));var a,r,o=n(52),c=n(0),i=n(206),s=n(170),l=n(77),u=n(48),d=n(36),p=n.n(d),j=n(65),b=n(53),m=n(37),f=n(25),O=n(18),g=n(212),h=n(221),x=n(4);!function(e){e.Username="username",e.Email="email",e.Name="name",e.Password="password",e.UsernameOREmail="usernameOrEmail"}(a||(a={})),function(e){e.Small="small",e.Medium="medium"}(r||(r={}));var y,v,E,S,T=function(e){return e===a.UsernameOREmail?"Username or Email":e[0].toUpperCase()+e.slice(1)},w=function(e){var t=e.state,n=e.onChange,r=e.type,o=e.actionType,c=e.size,i="";return i=r===a.Password||r===a.Email?r:"text",Object(x.jsx)(h.a,{value:t,onChange:function(e){return n(e,o)},type:i,label:T(r),variant:"outlined",fullWidth:!0,size:c})},_=n(136),C=n.n(_),k=Object(i.a)((function(e){return{inputContainer:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",color:"#555555",margin:e.spacing(0,"auto")},fileText:{marginLeft:"14px"},button:{width:"72%",minWidth:"240px"}}})),N=function(e){var t=e.file,n=e.onChange,a=e.actionType,r=Object(c.useRef)(null),o=k(),i=o.inputContainer,s=o.fileText,u=o.button;return Object(x.jsxs)("div",{className:i,children:[Object(x.jsx)("input",{type:"file",accept:"image/jpeg",style:{display:"none"},ref:r,onChange:function(e){n(e,a)}}),Object(x.jsx)(g.a,{variant:"contained",className:u,onClick:function(){r.current&&r.current.click()},startIcon:Object(x.jsx)(C.a,{}),children:Object(x.jsx)(l.a,{variant:"body2",children:"Upload Profile Picture"})}),Object(x.jsx)(l.a,{className:s,variant:"body2",noWrap:!0,children:t?t.name:"No file selected"})]})},U=n(98),I=Object(f.gql)(y||(y=Object(U.a)(["\n  mutation SignUp($input: SignUpInput!) {\n    signup(input: $input) {\n      token\n      user {\n        id\n        username\n        email\n        name\n        profilePicture\n      }\n    }\n  }\n"]))),P=Object(f.gql)(v||(v=Object(U.a)(["\n  mutation Login($usernameOrEmail: String!, $password: String!) {\n    login(usernameOrEmail: $usernameOrEmail, password: $password) {\n      token\n      user {\n        id\n        username\n        email\n        name\n        profilePicture\n      }\n    }\n  }\n"]))),A=(Object(f.gql)(E||(E=Object(U.a)(["\n  mutation Logout($userId: ID!) {\n    logout(userId: $userId) {\n      bool\n    }\n  }\n"]))),function(e){if(e&&/\.jpg/i.test(e.name))return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}));throw new Error("Please upload a valid .jpg file")}),R=n(64),M={username:"",email:"",name:"",password:"",profilePicture:void 0};function L(e,t){var n=Object.assign({},e);switch(t.type){case S.SET_USERNAME:return n.username=t.payload,n;case S.SET_EMAIL:return n.email=t.payload,n;case S.SET_NAME:return n.name=t.payload,n;case S.SET_PASSWORD:return n.password=t.payload,n;case S.SET_PROFILE_PICTURE:return n.profilePicture=t.file,n;default:return e}}!function(e){e.SET_USERNAME="SignUpForm/SET_USERNAME",e.SET_EMAIL="SignUpForm/SET_EMAIL",e.SET_NAME="SignUpForm/SET_NAME",e.SET_PASSWORD="SignUpForm/SET_PASSWORD",e.SET_PROFILE_PICTURE="SignUpForm/SET_PROFILE_PICTURE"}(S||(S={}));var F,z=Object(i.a)((function(e){return{form:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",width:"100%",height:"320px"},button:{width:"100%",height:"32px"}}})),D=function(e){var t=e.setUser,n=Object(c.useReducer)(L,M),o=Object(m.a)(n,2),i=o[0],s=i.username,l=i.email,u=i.name,d=i.password,h=i.profilePicture,y=o[1],v=Object(f.useMutation)(I,{onError:function(e){if(e.graphQLErrors.length){var t=e.graphQLErrors[0];if(t.extensions&&t.extensions.validationErrors)return void _(t.extensions.validationErrors)}}}),E=Object(m.a)(v,2),T=E[0],_=(E[1].data,Object(c.useContext)(R.a).setErrors),C=Object(O.g)(),k=Object(c.useCallback)((function(e,t){y({type:t,payload:e.currentTarget.value})}),[]),U=Object(c.useCallback)((function(e,t){var n=e.currentTarget.files?e.currentTarget.files[0]:void 0;y({type:t,file:n,payload:""})}),[]),P=function(){var e=Object(b.a)(p.a.mark((function e(n){var a,r,o,c,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,A(h);case 4:a=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),r=e.t0.message,_([{Picture:r}]),e.abrupt("return");case 12:return e.prev=12,e.next=15,T({variables:{input:{username:s,email:l,name:u,password:d,profilePicture:a}}});case 15:(o=e.sent).data&&(localStorage.setItem("token",o.data.signup.token),c=o.data.signup.user,c.__typename,i=Object(j.a)(c,["__typename"]),t(i),C.push("/")),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(12),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[1,7],[12,19]])})));return function(t){return e.apply(this,arguments)}}(),F=z(),D=F.form,W=F.button;return Object(x.jsxs)("form",{onSubmit:P,className:D,children:[Object(x.jsx)(w,{state:s,onChange:k,type:a.Username,actionType:S.SET_USERNAME,size:r.Small}),Object(x.jsx)(w,{state:l,onChange:k,type:a.Email,actionType:S.SET_EMAIL,size:r.Small}),Object(x.jsx)(w,{state:u,onChange:k,type:a.Name,actionType:S.SET_NAME,size:r.Small}),Object(x.jsx)(w,{state:d,onChange:k,type:a.Password,actionType:S.SET_PASSWORD,size:r.Small}),Object(x.jsx)(N,{file:h,onChange:U,actionType:S.SET_PROFILE_PICTURE}),Object(x.jsx)(g.a,{className:W,type:"submit",variant:"contained",color:"secondary",size:"small",children:"Sign Up"})]})},W={usernameOrEmail:"",password:""};function $(e,t){var n=t.type,a=t.payload,r=Object.assign({},e);switch(n){case F.SET_USERNAME_OR_EMAIL:return r.usernameOrEmail=a,r;case F.SET_PASSWORD:return r.password=a,r;default:return e}}!function(e){e.SET_USERNAME_OR_EMAIL="LoginForm/SET_USERNAME_OR_EMAIL",e.SET_PASSWORD="LoginForm/SET_PASSWORD"}(F||(F={}));var H,B=Object(i.a)({form:{display:"flex",flexDirection:"column",width:"100%",justifyContent:"space-evenly",height:"320px"},button:{backgroundColor:"#EA2026",height:"48px"}}),q=function(e){var t=e.setUser,n=Object(c.useReducer)($,W),o=Object(m.a)(n,2),i=o[0],s=i.usernameOrEmail,l=i.password,u=o[1],d=Object(f.useMutation)(P,{onError:function(e){e.graphQLErrors.length&&v(["Invalid Login"])}}),h=Object(m.a)(d,2),y=h[0],v=(h[1].data,Object(c.useContext)(R.a).setErrors),E=Object(O.g)(),S=Object(c.useCallback)((function(e,t){u({type:t,payload:e.currentTarget.value})}),[]),T=function(){var e=Object(b.a)(p.a.mark((function e(n){var a,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,y({variables:{usernameOrEmail:s,password:l}});case 3:(a=e.sent)&&a.data&&(localStorage.setItem("token",a.data.login.token),r=a.data.login.user,r.__typename,o=Object(j.a)(r,["__typename"]),t(o),E.push("/"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=B(),C=_.form,k=_.button;return Object(x.jsxs)("form",{className:C,onSubmit:T,children:[Object(x.jsx)(w,{state:s,onChange:S,actionType:F.SET_USERNAME_OR_EMAIL,type:a.UsernameOREmail,size:r.Medium}),Object(x.jsx)(w,{state:l,onChange:S,actionType:F.SET_PASSWORD,type:a.Password,size:r.Medium}),Object(x.jsx)(g.a,{className:k,type:"submit",variant:"contained",color:"secondary",children:"Sign In"})]})},Q=Object(i.a)((function(){return{button:{width:"100%",marginTop:"4%",height:"32px"}}})),J=function(e){var t=e.setUser,n=Object(O.g)(),a=Object(f.useMutation)(P),r=Object(m.a)(a,2),o=r[0],c=(r[1].data,function(){var e=Object(b.a)(p.a.mark((function e(){var a,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({variables:{usernameOrEmail:"PanosPHL",password:"password"}});case 2:(a=e.sent).data&&(localStorage.setItem("token",a.data.login.token),r=a.data.login.user,r.__typename,c=Object(j.a)(r,["__typename"]),t(c),n.push("/"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),i=Q().button;return Object(x.jsx)(g.a,{onClick:function(){return c()},className:i,type:"button",variant:"contained",size:"small",children:"Continue as Demo User"})},X=Object(i.a)((function(e){return{container:{position:"relative",width:"100%",margin:e.spacing(2.5,0)},or:{position:"absolute",backgroundColor:"white",top:"-10px",left:"44.5%",height:"20px",width:"40px",display:"flex",justifyContent:"center",zIndex:2}}})),G=function(){var e=X(),t=e.container,n=e.or;return Object(x.jsxs)("div",{className:t,children:[Object(x.jsx)("hr",{}),Object(x.jsx)(l.a,{variant:"body2",className:n,children:"or"})]})},K=n.p+"static/media/stagewood_consortium_logo.1b84f41e.png",V=n.p+"static/media/stagewood_consortium_text.fb95a4e0.png",Y=n(105);!function(e){e.Login="login",e.SignUp="signup"}(H||(H={}));var Z=Object(i.a)((function(e){return{formCard:Object(o.a)({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",alignItems:"center",width:"512px",height:"672px",padding:e.spacing(3,7,0)},e.breakpoints.down("xs"),{height:"100vh",width:"100vw"}),flexColumn:{display:"flex",flexDirection:"column",alignItems:"center"},cardHeader:{height:"28%",justifyContent:"space-between"},cardContent:{width:"100%"},cardFooter:{marginTop:"4%",marginBottom:"2%"},logoStyle:{width:"56px"},logoTextStyle:{width:"228px"},subheaderText:{color:"#555555",fontWeight:"normal"},link:{color:e.palette.secondary.main,textDecoration:"none","&:hover":{color:e.palette.secondary.dark}}}}));t.default=function(e){var t=e.pageType,n=e.setUser,a=Z(),r=a.formCard,o=a.logoStyle,c=a.logoTextStyle,i=a.link,d=a.flexColumn,p=a.cardHeader,j=a.cardContent,b=a.cardFooter,m=a.subheaderText;return Object(x.jsx)(Y.b,{pageType:Y.a.Auth,children:Object(x.jsxs)(s.a,{variant:"outlined",elevation:3,className:r,children:[Object(x.jsxs)("div",{className:"".concat(d," ").concat(p),children:[Object(x.jsx)("img",{className:o,src:K,alt:"Stagewood Consortium"}),Object(x.jsx)("img",{className:c,src:V,alt:"StageWood Consortium Inc."}),Object(x.jsx)(l.a,{className:m,align:"center",variant:"subtitle1",children:"Dream. Express. Produce."})]}),Object(x.jsxs)("div",{className:"".concat(d," ").concat(j),children:[Object(x.jsx)(J,{setUser:n}),Object(x.jsx)(G,{}),t===H.SignUp?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(D,{setUser:n}),Object(x.jsxs)("div",{className:"".concat(d," ").concat(b),children:[Object(x.jsx)(l.a,{className:m,variant:"body2",children:"Have an account?"}),Object(x.jsx)(u.b,{className:i,to:"/login",children:Object(x.jsx)(l.a,{variant:"body2",children:"Sign In"})})]})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(q,{setUser:n}),Object(x.jsxs)("div",{className:"".concat(d," ").concat(b),children:[Object(x.jsx)(l.a,{className:m,variant:"body2",children:"Need an account?"}),Object(x.jsx)(u.b,{className:i,to:"/signup",children:Object(x.jsx)(l.a,{variant:"body2",children:"Sign Up"})})]})]})]})]})})}},114:function(e,t,n){},168:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(16),i=n.n(c),s=(n(114),n(37)),l=n(25),u=n(36),d=n.n(u),p=n(73),j=n(53),b=n(138),m=n(130),f=Object(b.a)({uri:"/graphql"}),O=Object(m.a)(function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.headers,r=localStorage.getItem("token"),e.abrupt("return",Object(p.a)(Object(p.a)({},a),{},{headers:{Authorization:r?"Bearer ".concat(r):null}}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).concat(f),g=new l.ApolloClient({link:O,cache:new l.InMemoryCache}),h=n(220),x=n(48),y=n(18),v=n(104),E=n(110),S=n(52),T=n(137),w=Object(T.a)({typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},palette:{primary:{main:"rgba(0, 0, 0, 0.65)",dark:"#F8F8F8",contrastText:"#333333"},secondary:{main:"#EB2127",dark:"#9D1120"},info:{main:"#757575"}}});w.typography.h3=(a={fontFamily:"Roboto, Helvetica",fontSize:"2.6rem"},Object(S.a)(a,w.breakpoints.down("lg"),{fontSize:"2.2rem"}),Object(S.a)(a,w.breakpoints.down("md"),{fontSize:"1.6rem"}),Object(S.a)(a,w.breakpoints.down("sm"),{fontSize:"2.4rem"}),a);var _=w,C=n(64),k=n(206),N=n(212),U=n(223),I=n(219),P=n(216),A=n(215),R=n(214),M=n(213),L=n(217),F=n(218),z=n(4),D=o.a.forwardRef((function(e,t){return Object(z.jsx)(R.a,Object(p.a)({direction:"down",ref:t},e))})),W=Object(k.a)((function(e){return{title:{textAlign:"center",fontSize:"2.4rem",fontFamily:"Roboto"},content:{margin:e.spacing(0,"auto")}}})),$=function(e){var t=e.open,n=e.setOpen,a=e.errors,r=e.setErrors,o=function(){n(!1),r([])},c=W(),i=c.title,s=c.content;return Object(z.jsxs)(U.a,{open:t,TransitionComponent:D,keepMounted:!0,onClose:o,"aria-labelledby":"error-modal-slide-title","aria-describedby":"error-modal-slide-description",fullWidth:!0,children:[Object(z.jsx)(A.a,{classes:{root:i},id:"error-modal-slide-title",disableTypography:!0,children:"Errors"}),Object(z.jsx)(P.a,{className:s,id:"error-modal-slide-list",children:Object(z.jsx)(M.a,{children:a.map((function(e,t){if("string"===typeof e)return Object(z.jsx)(L.a,{children:Object(z.jsx)(F.a,{primaryTypographyProps:{color:"error",variant:a.length>1?"body2":"h6"},primary:"".concat(e)})},"error-".concat(t+1));if(e){var n=Object.keys(e)[0];return Object(z.jsx)(L.a,{children:Object(z.jsx)(F.a,{primaryTypographyProps:{color:"error",variant:a.length>1?"body2":"h6"},primary:"".concat(n,": ").concat(e?e[n]:"")})},"error-".concat(t+1))}return Object(z.jsx)(z.Fragment,{})}))})}),Object(z.jsx)(I.a,{children:Object(z.jsx)(N.a,{onClick:o,color:"primary",children:"Close"})})]})},H=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,224))})),B=Object(r.lazy)((function(){return Promise.resolve().then(n.bind(null,110))})),q={id:0,username:"",email:"",name:"",profilePicture:"string"};var Q=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(!1),c=Object(s.a)(o,2),i=c[0],u=c[1],d=Object(r.useState)(q),p=Object(s.a)(d,2),j=p[0],b=p[1],m=Object(r.useCallback)((function(){localStorage.removeItem("token"),b(q)}),[]),f={errors:n,setErrors:a};return Object(r.useEffect)((function(){!i&&n.length&&u(!0)}),[n.length]),Object(r.useEffect)((function(){return function(){localStorage.clear()}}),[]),Object(z.jsx)(l.ApolloProvider,{client:g,children:Object(z.jsx)(h.a,{theme:_,children:Object(z.jsxs)(C.a.Provider,{value:f,children:[Object(z.jsx)($,{open:i,setOpen:u,errors:n,setErrors:a}),Object(z.jsx)(x.a,{children:Object(z.jsx)(r.Suspense,{fallback:Object(z.jsx)(v.b,{}),children:Object(z.jsxs)(y.d,{children:[Object(z.jsx)(y.b,{exact:!0,path:"/login",render:function(){return Object(z.jsx)(B,{pageType:E.AuthPageType.Login,setUser:b})}}),Object(z.jsx)(y.b,{exact:!0,path:"/signup",render:function(){return Object(z.jsx)(B,{pageType:E.AuthPageType.SignUp,setUser:b})}}),Object(z.jsx)(v.a,{path:"/",render:function(){return Object(z.jsx)(H,{user:j,handleLogout:m})},userId:j.id})]})})})]})})})};i.a.render(Object(z.jsx)(o.a.StrictMode,{children:Object(z.jsx)(Q,{})}),document.getElementById("root"))},64:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0),r=Object(a.createContext)({errors:[],setErrors:function(){return null}})}},[[168,1,2]]]);
//# sourceMappingURL=main.d1fac3ee.chunk.js.map